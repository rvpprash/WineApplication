define(["jquery","underscore","backbone"],function(e,t,i){var a,n=i.View.extend({el:e("#container"),template:t.template(e("#homepage").html()),render:function(){var i=t.template(e("#homepage").html());this.$el.html(i)},initialize:function(){console.log("Wine View initialized"),this.render()},events:{"click #redwine":"getWineData","click #whitewine":"getWineData","click #champagne":"getWineData","click #collectible":"getWineData","click .product-img":"getWineDetails","click .submenu":"displayMenuItems","click .menu-redwine":"displayMenuItems"},displayMenuItems:function(e){getWineDetails(e)},getWineDetails:function(i){var n=e(i.currentTarget).data("index"),c=a.Products,l=c.List[n],r=t.template(e("#productDetail").html());this.$el.html(r({name:l.Name,price:l.PriceRetail,vintage:l.Vintage,style:l.ProductAttributes[0].Name,thumbnail:l.Labels[0].Url}))},getWineData:function(t){var i=e(t.currentTarget).data("category"),a=e(t.currentTarget).data("winefilter");this.loadWines(i,a)},loadWines:function(i,n){var c=this,l=e.ajax({url:"http://services.wine.com/api/beta2/service.svc/json/catalog?filter=categories"+n+"&apikey=fabd6ec3a4a1efe7a1fa10e3a656ac0b",method:"GET"}).then(function(n){a=n,console.log("response: ",n.Products.length);var l=t.template(e("#displayItems").html()),r=n.Products,o=r.List;c.$el.html(l({category:i,response:o}))}).catch(function(e){console.log("Error in request: ",e)});console.log("response: ",l)}});return n});